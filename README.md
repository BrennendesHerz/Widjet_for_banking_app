 # Widget for banking app
 
## Описание

Widget for banking app - проект по разработке виджета для личного кабинета пользователей банковского приложенения. Разрабатываемый виджет показывает несколько последних успешных банковских операций клиентов.

## Функциональность

Для реализации проекта были разработы следующие функциональные модули:

### decorators

Модуль decorators содержит декоратор, позволяющий регистрировать детали выполнения функций: имя функции, передаваемые аргументы, результат выполнения и информацию об ошибках.

- декоратор `log` - опционально принимает имя файла, в который будут записаны детали выполнения функции. Если параметр не передан - данные выводятся в консоль.
Пример входных данных и вызова функции:
```python  
@log()
def add(x, y):
    return x + y

add(1, 2)
```
Пример вывода функции:
```python 
"Фуккция add выполнена с результатом 3"
```

### generators

Модуль generators содержит функции-генераторы, позволяющие финансовым аналитикам быстро и удобно находить нужную информацию о транзакциях и проводить анализ данных, а также функцию, генерирующую номера для банковских карт.

- функция `filter_by_currency` - принимает список словарей, содержащих информацию о транзакциях, и валюту, по которой необходимо отфильтровать транзакции. Вывод функции - транзакции с заданной валютой.
Пример входных данных и вызова функции:
```python                                                  
transactions = [
                {
                    "id": 939719570,
                    "state": "EXECUTED",
                    "date": "2018-06-30T02:08:58.425572",
                    "operationAmount": {"amount": "9824.07", "currency": {"name": "USD", "code": "USD"}},
                    "description": "Перевод организации",
                    "from": "Счет 75106830613657916952",
                    "to": "Счет 11776614605963066702"
                },
                {
                    "id": 142264268,
                    "state": "EXECUTED",
                    "date": "2019-04-04T23:20:05.206878",
                    "operationAmount": {"amount": "79114.93", "currency": {"name": "USD", "code": "USD"}},
                    "description": "Перевод со счета на счет",
                    "from": "Счет 19708645243227258542",
                    "to": "Счет 75651667383060284188"
                },
                {
                    "id": 873106923,
                    "state": "EXECUTED",
                    "date": "2019-03-23T01:09:46.296404",
                    "operationAmount": {"amount": "43318.34", "currency": {"name": "руб.", "code": "RUB"}},
                    "description": "Перевод со счета на счет",
                    "from": "Счет 44812258784861134719",
                    "to": "Счет 74489636417521191160"
                }
        ]

usd_transactions = filter_by_currency(transactions, "USD")
for _ in range(2):
    print(next(usd_transactions))
```
Пример вывода функции:
```python 
    {
          "id": 939719570,
          "state": "EXECUTED",
          "date": "2018-06-30T02:08:58.425572",
          "operationAmount": {"amount": "9824.07", "currency": {"name": "USD", "code": "USD"}},
          "description": "Перевод организации",
          "from": "Счет 75106830613657916952",
          "to": "Счет 11776614605963066702"
      }
      {
              "id": 142264268,
              "state": "EXECUTED",
              "date": "2019-04-04T23:20:05.206878",
              "operationAmount": {"amount": "79114.93", "currency": {"name": "USD", "code": "USD"}},
              "description": "Перевод со счета на счет",
              "from": "Счет 19708645243227258542",
              "to": "Счет 75651667383060284188"
       }
```

- функция `transaction_descriptions` - принимает список словарей, содержащих информацию о транзакциях и возвращает их описание.
Пример входных данных и вызова функции:
```python                                                  
transactions = [
                {
                    "id": 939719570,
                    "state": "EXECUTED",
                    "date": "2018-06-30T02:08:58.425572",
                    "operationAmount": {"amount": "9824.07", "currency": {"name": "USD", "code": "USD"}},
                    "description": "Перевод организации",
                    "from": "Счет 75106830613657916952",
                    "to": "Счет 11776614605963066702"
                },
                {
                    "id": 142264268,
                    "state": "EXECUTED",
                    "date": "2019-04-04T23:20:05.206878",
                    "operationAmount": {"amount": "79114.93", "currency": {"name": "USD", "code": "USD"}},
                    "description": "Перевод со счета на счет",
                    "from": "Счет 19708645243227258542",
                    "to": "Счет 75651667383060284188"
                },
                {
                    "id": 873106923,
                    "state": "EXECUTED",
                    "date": "2019-03-23T01:09:46.296404",
                    "operationAmount": {"amount": "43318.34", "currency": {"name": "руб.", "code": "RUB"}},
                    "description": "Перевод со счета на счет",
                    "from": "Счет 44812258784861134719",
                    "to": "Счет 74489636417521191160"
                }
        ]

descriptions = transaction_descriptions(transactions)
for _ in range(3):
    print(next(descriptions))
```
Пример вывода функции:
```python
    "Перевод организации"
    "Перевод со счета на счет"
    "Перевод со счета на счет"
```

- функция `card_number_generator` - принимает начальное и конечное значения и генерирует номера карт в заданном диапазоне в формате *ХХХХ ХХХХ ХХХХ ХХХХ*.
Пример входных данных и вызова функции:
```python                                                  
for card_number in card_number_generator(1, 3):
    print(card_number)
```
Пример вывода функции:
```python
    "0000 0000 0000 0001"
    "0000 0000 0000 0002"
    "0000 0000 0000 0003"
```

### masks

Модуль masks содержит функции, возвращающие маски для номера счета и номера карты.

- функция `get_mask_card_number` - принимает номер карты и возвращает маску номера в формате _XXXX XX** **** XXXX_.
Пример входных данных и вызова функции:
```python                                                  
mask_card = get_mask_card_number("7000792289606361")
print(mask_card)
```
Пример вывода функции:
```python
    "7000 79** **** 6361"
```

- функция `get_mask_account` - принимает номер счета и возвращает маску номера в формате _**XXXX_.
Пример входных данных и вызова функции:
```python                                                  
mask_account = get_mask_account("73654108430135874305")
print(mask_account)
```
Пример вывода функции:
```python
    "**4305"
```

### processing

Модуль processing содержит функции, позволяющие финансовым аналитикам получать данные о выполненных/отклоненных транзакциях, а также фильтровать транзакции по датам.

- функция `filter_by_state` - принимает список словарей, содержащих информацию о транзакциях, и статус операции (опционально, значение по умолчанию - EXECUTED). Вывод функции - транзакции с заданным статусом.
Пример входных данных и вызова функции:
```python                                                  
transactions = [
                {
                    "id": 939719570,
                    "state": "EXECUTED",
                    "date": "2018-06-30T02:08:58.425572"
                },
                {
                    "id": 142264268,
                    "state": "CANCELED",
                    "date": "2019-04-04T23:20:05.206878"
                },
                {
                    "id": 873106923,
                    "state": "EXECUTED",
                    "date": "2019-03-23T01:09:46.296404"
                }
        ]

executed_transactions = filter_by_state(transactions)
print(executed_transactions)
```
Пример вывода функции:
```python
    [
        {
            "id": 939719570,
            "state": "EXECUTED",
            "date": "2018-06-30T02:08:58.425572"
        },
        {
            "id": 873106923,
            "state": "EXECUTED",
            "date": "2019-03-23T01:09:46.296404"
        }
    ]
```

- функция `sort_by_date` - принимает список словарей, содержащих информацию о транзакциях, и необязательный параметр, задающий порядок сортировки (по умолчанию - `reverse=True`). Вывод функции - список словарей, отсортрованных по дате в заданном порядке.
Пример входных данных и вызова функции:
```python                                                  
transactions = [
                {
                    "id": 939719570,
                    "state": "EXECUTED",
                    "date": "2018-06-30T02:08:58.425572"
                },
                {
                    "id": 142264268,
                    "state": "CANCELED",
                    "date": "2019-04-04T23:20:05.206878"
                },
                {
                    "id": 873106923,
                    "state": "EXECUTED",
                    "date": "2019-03-23T01:09:46.296404"
                }
        ]

sort_transactions = sort_by_date(transactions)
print(sort_transactions)
```
Пример вывода функции:
```python
    [
        {
            "id": 142264268,
            "state": "CANCELED",
            "date": "2019-04-04T23:20:05.206878"
        },
        {
            "id": 873106923,
            "state": "EXECUTED",
            "date": "2019-03-23T01:09:46.296404"
        },
        {
            "id": 939719570,
            "state": "EXECUTED",
            "date": "2018-06-30T02:08:58.425572"
        }
    ]
```

### widget

Модуль widget содержит следующие функции:

- функция `mask_account_card` - принимает номер счета или карты и возвращает маску номера в формате: 
  - для карты _Card name XXXX XX** **** XXXX_;
  - для счета _Счет **XXXX_.
Пример входных данных и вызова функции:
```python                                                  
mask_card = mask_account_card("Visa Platinum 8990922113665229")
mask_account = mask_account_card("Счет 73654108430135874305")
print(mask_card)
print(mask_account)
```
Пример вывода функции:
```python
    "Visa Platinum 8990 92** **** 5229"
    "Счет **4305"
```

- функция `get_data` - принимает строку в формате _"2024-03-11T02:26:18.671407"_ и возвращает строку с датой в формате _"ДД.ММ.ГГГГ"_.
Пример входных данных и вызова функции:
```python                                                  
transaction_date = get_date("2024-03-11T02:26:18.671407")
print(transaction_date)
```
Пример вывода функции:
```python
    "11.03.2024"
```

## Зависимости

- Python ^3.12
- flake8 ^7.1.0
- black ^24.4.2
- isort ^5.13.2
- mypy ^1.10.0
- pytest ^8.2.2
- pytest-cov ^5.0.0


## Установка

1. Клонируйте репозиторий:
```
git@github.com:BrennendesHerz/Widjet_for_banking_app.git
```

2. Установите зависимости:
```python
poetry install
```

## Тестирование

Проект покрыт юнит-тестами. Для их запуска выполните команду:
```
pytest
```

Процент покрытия тестами согласно Code coverage: 100%.